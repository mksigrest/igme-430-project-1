<html lang="en">

<head>
    <meta charset="utf-8"/>
    <title>Country Api Docs</title>
    <link rel="stylesheet" type="text/css" href="/client.css" />
</head>

<body>
    <header><h1>Country Api Docs</h1></header>
    <br />
    <div class="content">

        <div class="endpoint">
            <h3>getCountryName</h3>
            <label for="region">Region: </label>
            <input class="regionField" type="text" />
            <label for="capital">Capital: </label>
            <input class="capitalField" type="text" />
            <select id="nameMethodSelect">
                <option value="get">GET</option>
                <option value="head">HEAD</option>
            </select>
            <button id="nameSubmit">Get Country Countries</button>
        </div>
        <div id="nameOutput">
        </div>
        <br />

        <div class="endpoint">
            <h3>getCountryLocation</h3>
            <label for="name">Name: </label>
            <input class="nameField" type="text" />
            <label for="capital">Capital: </label>
            <input class="capitalField" type="text" />
            <select id="locationMethodSelect">
                <option value="get">GET</option>
                <option value="head">HEAD</option>
            </select>
            <button id="locationSubmit">Get Country Location</button>
        </div>
        <div id="locationOutput">
        </div>
        <br />

        <div class="endpoint">
            <h3>getCountryFinance</h3>
            <label for="name">Name: </label>
            <input class="nameField" type="text" />
            <label for="capital">Capital: </label>
            <input class="capitalField" type="text" />
            <select id="financeMethodSelect">
                <option value="get">GET</option>
                <option value="head">HEAD</option>
            </select>
            <button id="financeSubmit">Get Country Finances</button>
        </div>
        <div id="financeOutput">
        </div>
        <br />

        <div class="endpoint">
            <h3>getAllCountries</h3>
            <select id="allMethodSelect">
                <option value="get">GET</option>
                <option value="head">HEAD</option>
            </select>
            <button id="allSubmit">Get All Countries</button>
        </div>
        <div id="allOutput">
        </div>
        <br />

        <div class="endpoint">
            <h3>addCountry</h3>
            <label for="name">Name: </label>
            <input class="nameField" type="text" />
            <label for="capital">Capital: </label>
            <input class="capitalField" type="text" />
            <button id="addSubmit">Add Country</button>
        </div>
        <div id="addOutput">
        </div>
        <br />

        <div class="endpoint">
            <h3>editCapital</h3>
            <label for="name">Name: </label>
            <input class="nameField" type="text" />
            <label for="capital">Capital: </label>
            <input class="capitalField" type="text" />
            <label for="newCapital">New Capital: </label>
            <input class="newCapitalField" type="text" />
            <button id="editSubmit">Edit Country Capital</button>
        </div>
        <div id="editOutput">
        </div>

    </div>
</body>
<script>
    document.getElementById('allSubmit').addEventListener('click', async (e) => {
        e.preventDefault();

        const url = '/api/getAllCountries';
        const method = document.getElementById('allMethodSelect').value.toUpperCase();
        const response = await fetch(url, { method });
        const allOutput = document.getElementById('allOutput');

        console.log('Pressed');

        if (method !== 'HEAD') {
            if (response.ok) {
                const data = await response.json();
                allOutput.innerHTML = `<strong>Success</strong> <br> <br> ${JSON.stringify(data)}`;
                console.log(data);
            }
            else {
                const error = await response.json();
                allOutput.innerHTML = `<strong>Not Found</strong> <br> <br> Message: ${error.message}`;
                console.log(error);
            }
        }
        else {
            if (response.ok) {
                allOutput.innerHTML = `<strong>Success</strong>`
            }
            else {
                allOutput.innerHTML = `<strong>Not Found</strong>`
            }
        }
    })
</script>
</html>